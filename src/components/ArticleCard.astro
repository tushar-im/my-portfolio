---
/**
 * ArticleCard Component
 * 
 * Displays a blog/writing entry in a card format with metadata, title, description, and tags.
 * Extends BaseCard component with article-specific formatting and automatically generates
 * links to the full article page.
 * 
 * @component
 * 
 * @example
 * ```astro
 * <ArticleCard
 *   title="Getting Started with Astro"
 *   slug="getting-started-astro"
 *   description="Learn how to build fast websites with Astro"
 *   publishDate={new Date('2024-01-15')}
 *   tags={['astro', 'web-development', 'tutorial']}
 * />
 * ```
 */

import BaseCard from './BaseCard.astro';
import ForwardLink from './ForwardLink.astro';

interface Props {
  /** Article title (displayed as card heading) */
  title: string;
  
  /** URL slug for the article (used to generate /writing/{slug} link) */
  slug: string;
  
  /** Brief description or excerpt of the article */
  description: string;
  
  /** Publication date (formatted as "Month Day, Year") */
  publishDate: Date;
  
  /** Optional array of tags/categories for the article */
  tags?: string[];
}

const { title, slug, description, publishDate, tags = [] } = Astro.props;

/**
 * Formats a date object into a human-readable string
 * 
 * Uses US English locale with long month format.
 * Example output: "January 15, 2024"
 * 
 * @param date - The date to format
 * @returns Formatted date string in "Month Day, Year" format
 */
function formatDate(date: Date): string {
  return new Intl.DateTimeFormat('en-US', {
    year: 'numeric',
    month: 'long',
    day: 'numeric'
  }).format(date);
}
---

<BaseCard href={`/writing/${slug}`} class="article-card">
  <Fragment slot="meta">{formatDate(publishDate)}</Fragment>
  <Fragment slot="title">{title}</Fragment>
  <Fragment slot="description">{description}</Fragment>
  
  {tags.length > 0 && (
    <div slot="tags" class="tags-list">
      {tags.map((tag) => (
        <span class="tag">{tag}</span>
      ))}
    </div>
  )}
  
  <ForwardLink text="Read article" />
</BaseCard>
